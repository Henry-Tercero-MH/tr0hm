/* Estilos mínimos para la app */
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

/* Estilos mínimos para la app */
html, body, #__next {
  height: 100%;
  margin: 0;
  /* Headings use Orbitron, body uses Inter for readability */
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  /* Theme-aware background and text color */
  background: var(--bg, linear-gradient(180deg, #f7fbff 0%, #f7fbff 100%));
  color: var(--text, #0f1724);
}

main {
  max-width: 800px;
  margin: 24px auto;
  background: var(--card, #fff);
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(16,24,40,0.08);
  padding: 20px;
}

input { 
  padding: 10px 12px; 
  margin: 6px 0; 
  width: 100%; 
  box-sizing: border-box;
  border: 1px solid var(--border-light, rgba(0,0,0,0.1));
  border-radius: 6px;
  background: var(--card);
  color: var(--text);
  font-family: inherit;
}

[data-theme="dark"] input {
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  background: var(--card);
  color: var(--text-high);
}

button { 
  padding: 10px 16px; 
  margin-top: 8px;
  border-radius: 6px;
  font-weight: 500;
  cursor: pointer;
}

/* Color palette - light theme (WhatsApp inspired) */
[data-theme="light"]{
  --bg: #ECE5DD; /* WhatsApp light background */
  --card: #ffffff;
  /* solid card background for components that need opaque background */
  --card-solid: #ffffff;
  --muted-high: #667781; /* WhatsApp muted text */
  --text-high: #111B21; /* WhatsApp dark text */
  /* map common tokens so other rules using --text/--muted still work */
  --muted: var(--muted-high);
  --text: var(--text-high);
  --primary: #25D366; /* WhatsApp green */
  --accent: #128C7E; /* WhatsApp teal */
  --danger: #ea4335;
  --glass: rgba(255,255,255,0.7);
  --chat-bubble-out: #D9FDD3; /* WhatsApp outgoing message */
  --chat-bubble-in: #ffffff; /* WhatsApp incoming message */
  --border-light: rgba(0,0,0,0.08);
}

/* Ensure body overlay for light theme is simple white */
[data-theme="light"] body::before{
  background: linear-gradient(180deg, #ffffff 0%, #ffffff 100%);
  backdrop-filter: none;
}


/* Header / Brand */
header.site-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 20px;
  max-width:900px;
  margin:18px auto 0;
  /* make header text visible on dark background */
  color: var(--text-high);
}
.site-header{ /* no wrap by default to keep header on a single row */ flex-wrap: nowrap; }
.brand{
  display:flex;
  align-items:center;
  gap:10px;
}
.brand .logo{
  width:40px; height:40px; border-radius:8px;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  box-shadow: 0 4px 12px rgba(99,102,241,0.18);
}
.brand h1{ font-size:18px; margin:0; color:var(--text); }
.nav-links{ display:flex; gap:12px; align-items:center; flex: 1 1 auto; justify-content:flex-end; min-width:0; }
.nav-links a{ color:var(--muted); text-decoration:none; padding:6px 8px; border-radius:6px; white-space:nowrap; }
.nav-links a:hover{ background: rgba(255,255,255,0.02); color:var(--text); }

/* Container for inline navigation links (desktop / tablet). Keeps links in one row and allows horizontal overflow
  instead of wrapping into a vertical stack when space is tight. On small screens this container is hidden and
  the hamburger + mobile menu are used. */
.nav-inline{ display:flex; gap:12px; align-items:center; min-width:0; overflow-x:auto; -webkit-overflow-scrolling:touch; }
.nav-inline a{ white-space:nowrap; }
.nav-inline::-webkit-scrollbar{ display:none; }
/* Use bootstrap-compatible utility: allow nav-inline to scroll gently when narrow */
.nav-inline{ padding-bottom:2px; }

/* Hamburger button - hidden on desktop, visible on small screens */
.hamburger{
  display:none;
  background:transparent;
  border:0;
  padding:8px;
  border-radius:8px;
  cursor:pointer;
  color:var(--muted);
}
.hamburger svg{ display:block; }

/* Mobile nav overlay */
.mobile-nav{
  position: absolute;
  top: calc(100% + 8px);
  left: 12px;
  right: 12px;
  background: var(--card);
  border: 1px solid var(--glass-border, rgba(255,255,255,0.04));
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
  border-radius: 10px;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 60;
  min-width: 180px;
}
.mobile-nav a{ display:block; color:var(--text) !important; }
.mobile-nav .btn{ width:100%; }
.mobile-nav a{ color:var(--text); padding:8px; border-radius:8px; text-decoration:none; }
.mobile-nav .btn{ width:100%; }

/* Cards / posts */
.card, .post-card{
  background: var(--card);
  border-radius:10px;
  padding:14px;
  margin-bottom:12px;
  box-shadow: 0 4px 12px rgba(2,6,23,0.04);
}
.post-header{ display:flex; align-items:center; gap:10px; }
.avatar{ width:44px; height:44px; border-radius:50%; background:linear-gradient(135deg,#eff6ff,#e9d5ff); display:inline-block; overflow:hidden; }
.avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.post-meta{ font-size:13px; color:var(--muted); }
.post-body{ margin-top:10px; color:var(--text); line-height:1.45; }
.post-actions{ margin-top:12px; display:flex; gap:8px; }

.post-card{ transition: transform 160ms cubic-bezier(.2,.9,.3,1), box-shadow 160ms; }
.post-card:hover{ transform: translateY(-4px); box-shadow: 0 10px 30px rgba(2,6,23,0.08); }

.post-actions .btn{ display:inline-flex; align-items:center; gap:6px; padding: 8px 12px; }
.post-actions .btn svg{ width:18px; height:18px; flex-shrink: 0; }
.btn-liked{ background: linear-gradient(90deg, rgba(109,40,217,0.08), rgba(6,182,212,0.02)); border-left:3px solid var(--primary); }
.btn-like-anim{ transition: transform 140ms; }
.btn-like-anim:active{ transform: scale(0.96); }

/* Buttons */
.btn{ border:0; cursor:pointer; border-radius:8px; padding:8px 12px; font-weight:600; }
.btn-primary{ background: linear-gradient(90deg, var(--primary), #4c1d95); color:#fff; box-shadow: 0 6px 18px rgba(99,102,241,0.18); }
.btn-ghost{ background:transparent; border:1px solid rgba(15,23,36,0.06); color:var(--text); }
.btn-danger{ background:var(--danger); color:#fff; }

/* Forms WhatsApp style */
label{
  display:block;
  margin-top:8px;
  font-size:13px;
  color:var(--muted);
  font-weight: 500;
}

input, textarea{
  border:1px solid var(--border-light, rgba(0,0,0,0.1));
  border-radius:6px;
  padding:10px 12px;
  font-size:14px;
  font-family: inherit;
  background: var(--card);
  color: var(--text);
  transition: border-color 200ms ease;
}

input:focus, textarea:focus{
  border-color: var(--primary);
  outline: none;
}

[data-theme="dark"] input, [data-theme="dark"] textarea{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  background: var(--card);
  color: var(--text-high);
}

[data-theme="dark"] input:focus, [data-theme="dark"] textarea:focus{
  border-color: var(--wa-green);
}

textarea{ min-height:100px; resize:vertical; }

/* Register page specific styles (responsive + password criteria) */
.register-shell{ max-width:620px; margin: 18px auto; padding: 18px; }
.register-form{ display:flex; flex-direction:column; gap:12px; }
.register-form .form-row{ display:flex; flex-direction:column; }
.register-form .form-actions{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap; }

/* Password criteria WhatsApp style */
.password-criteria{ display:flex; flex-direction:column; gap:6px; margin-top:8px; }
.criteria{ display:flex; gap:8px; align-items:center; font-size:13px; color:var(--muted); }
.criteria .dot{ width:20px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; }
.criteria.met{ color: var(--primary); }
.criteria.met .dot{ color: var(--primary); }

[data-theme="dark"] .criteria.met{ color: var(--wa-green); }
[data-theme="dark"] .criteria.met .dot{ color: var(--wa-green); }

.criteria.unmet{ color:var(--muted); }

@media (max-width:520px){
  .register-shell{ margin:12px; padding:12px; }
  main { margin: 8px; }
  .register-form .form-actions{ flex-direction:column-reverse; }
  .register-form .form-actions .btn{ width:100%; }
}

/* Password strength bar WhatsApp style */
.password-strength-wrapper{ display:flex; align-items:center; gap:12px; margin-top:8px; }
.password-strength{
  flex:1 1 auto;
  height:8px;
  background: var(--border-light, rgba(0,0,0,0.08));
  border-radius:4px;
  overflow:hidden;
  border: none;
}

[data-theme="dark"] .password-strength{
  background: var(--border-dark, rgba(255,255,255,0.1));
}

.password-strength .fill{ height:100%; width:0%; transition: width 220ms ease; border-radius:4px; }
.password-strength .fill.low{ background: #ea4335; }
.password-strength .fill.mid{ background: #fbbc04; }
.password-strength .fill.high{ background: var(--primary); }

[data-theme="dark"] .password-strength .fill.high{ background: var(--wa-green); }

.strength-label{ font-size:13px; color:var(--muted); min-width:56px; text-align:right; }

/* Replace criteria dot with icon container */
.criteria .icon{ width:20px; height:20px; display:inline-flex; align-items:center; justify-content:center; }
.criteria.met{ color:var(--primary); }

[data-theme="dark"] .criteria.met{ color: var(--wa-green); }

.criteria.unmet{ color:var(--muted); }

/* Notifications WhatsApp style */
.notifications-dropdown{ min-width:260px; max-height:320px; overflow:auto; padding:8px; }
.notification{
  display:flex;
  gap:8px;
  padding:10px;
  border-radius:8px;
  align-items:flex-start;
  transition: background 150ms ease;
}

.notification:hover{
  background: rgba(0,0,0,0.03);
}

[data-theme="dark"] .notification:hover{
  background: rgba(255,255,255,0.05);
}

.notification.unread{
  background: rgba(37,211,102,0.08);
  border-left:3px solid var(--primary);
}

[data-theme="dark"] .notification.unread{
  background: rgba(0,168,132,0.1);
  border-left-color: var(--wa-green);
}

.notification .text{ font-size:14px; color:var(--text); }
.notification .time{ font-size:12px; color:var(--muted); }

/* Comments */
.comment{ padding:8px; border-radius:8px; background: linear-gradient(180deg, rgba(243,246,255,0.6), rgba(255,255,255,0.6)); margin-bottom:8px; }
.comment small{ color:var(--muted); }

/* Toasts */
.toast-container{ position:fixed; right:18px; bottom:18px; display:flex; flex-direction:column; gap:8px; z-index:9999; }
.toast{ min-width:220px; background: #fff; padding:10px 12px; border-radius:8px; box-shadow: 0 6px 18px rgba(2,6,23,0.12); border-left:4px solid transparent; font-weight:600; }
.toast.info{ border-left-color: #60a5fa; }
.toast.success{ border-left-color: #10b981; }
.toast.error{ border-left-color: #ef4444; }
.toast-message{ font-size:14px; color:var(--text); }

/* Entry animation */
.toast.enter{ animation: toast-in 200ms cubic-bezier(.2,.9,.3,1) both; }
@keyframes toast-in{ from { opacity: 0; transform: translateY(8px) scale(.98); } to { opacity:1; transform: translateY(0) scale(1); } }

/* Closing (exit) state */
.toast.closing{ opacity: 0; transform: translateY(8px) scale(.98); transition: all 180ms ease; }

.toast-close{ background:transparent; border:0; font-size:14px; line-height:1; padding:6px; cursor:pointer; margin-left:8px; color:var(--muted); border-radius:50%; width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; }
.toast-close:hover{ color:var(--text); background:rgba(2,6,23,0.04); }

/* Utility */
.muted{ color:var(--muted); }
.center{ text-align:center; }

/* Responsive tweaks */
@media (max-width:720px){
  main { margin:12px; padding:12px; }
  header.site-header{ max-width:calc(100% - 24px); margin:12px auto 0; }
  /* keep header on a single row in mobile: brand left, controls right */
  header.site-header{ flex-wrap:nowrap; align-items:center; }
  /* show hamburger */
  .hamburger{ display:inline-flex; align-items:center; justify-content:center; }
  /* hide inline textual links and avatar/buttons; keep only hamburger visible on mobile */
  .nav-inline { display: none; }
  .nav-links > .avatar, .nav-links > .btn, .nav-links > .muted { display: none; }
  /* keep theme-toggle visible on mobile (user requested it stays outside the hamburger) */
  .nav-links > .theme-toggle { display: inline-flex; }
  /* keep notifications hidden on mobile to avoid crowding (optional) */
  .nav-notifications { display: none; }
  /* keep brand flexible and nav-links compact so items stay on one row */
  .brand { flex: 1 1 auto; }
  .nav-links { flex: 0 0 auto; box-sizing: border-box; padding: 6px 8px; }
}

/* Fullscreen mobile drawer (backdrop + sliding panel) */
.mobile-drawer{
  position: fixed; inset: 0; z-index: 120; display:flex; align-items:flex-start; justify-content:flex-end; pointer-events:auto;
}
.mobile-drawer-backdrop{ position: absolute; inset: 0; background: rgba(0,0,0,0.45); }
.mobile-drawer-panel{ position: relative; width: 280px; max-width: 100%; height: 100vh; background: var(--card); box-shadow: -12px 0 40px rgba(0,0,0,0.6); padding: 18px; display:flex; flex-direction:column; gap:12px; overflow:auto; }
.mobile-drawer .mobile-nav a{ color:var(--text); padding:10px 8px; border-radius:8px; }

@media (min-width:721px){
  .mobile-drawer, .mobile-drawer-panel, .mobile-drawer-backdrop { display:none !important; }
}

/* Ensure main and header adapt to small/mobile viewports and don't stay fixed width */
@media (max-width:900px){
  main { max-width: none; width: calc(100% - 24px); margin: 12px auto; box-sizing: border-box; }
  header.site-header { max-width: none; width: calc(100% - 24px); box-sizing: border-box; }
  .register-shell { max-width: 100%; width: 100%; margin: 12px; padding: 12px; }
  .messages-shell { grid-template-columns: 1fr; height: auto; }
}

/* Stories */
.story-tile{ display:inline-flex; flex-direction:column; align-items:center; gap:6px; padding:6px; border-radius:10px; transition: transform 200ms cubic-bezier(.2,.9,.3,1), box-shadow 200ms; }
.story-tile:hover{ transform: translateY(-6px); box-shadow: 0 10px 30px rgba(2,6,23,0.06); }
.story-pulse{ position:absolute; margin-top: -54px; margin-left: 22px; width: 12px; height: 12px; border-radius: 50%; background: rgba(99,102,241,0.9); box-shadow: 0 0 0 0 rgba(99,102,241,0.6); animation: pulse 1.6s infinite; }
@keyframes pulse{ 0% { transform: scale(.8); box-shadow: 0 0 0 0 rgba(99,102,241,0.6); } 70% { transform: scale(1.3); box-shadow: 0 0 0 10px rgba(99,102,241,0); } 100% { transform: scale(.8); box-shadow: 0 0 0 0 rgba(99,102,241,0); } }
.story-pending .avatar{ filter: grayscale(.2) saturate(.9); opacity:.95; }

/* small spinner for pending states */
.spinner{ width:18px;height:18px;border-radius:50%;border:2px solid rgba(0,0,0,0.08);border-top-color:var(--primary);animation:spin 800ms linear infinite;display:inline-block }
@keyframes spin{ to { transform: rotate(360deg); } }

/* Modal story progress bar */
.story-progress{ height:100%; background: linear-gradient(90deg,var(--primary),var(--accent)); width:0%; transition: width 250ms linear; }

/* Stories responsive layout */
.stories-bar{ padding: 8px 6px; margin-bottom: 16px; }
.story-item{ flex: 0 0 auto; width: 92px; text-align: center; min-width: 64px; }
.story-btn{ background: transparent; border: 0; cursor: pointer; width: 100%; display: flex; flex-direction: column; align-items: center; position: relative; padding: 6px 4px; }
.story-tile{ transition: transform 0.2s ease, opacity 0.2s ease; }
.story-tile:hover{ transform: scale(1.05); opacity: 0.9; }
.story-avatar{ width: 64px; height: 64px; border-radius: 999px; object-fit: cover; display: inline-block; transition: filter 0.2s ease; }
.story-label{ font-size: 12px; margin-top: 6px; width: 100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

/* mobile adjustments: smaller avatars */
@media (max-width:520px){
  .stories-bar{ gap: 12px; padding-left: 8px; padding-right: 8px; }
  .story-item{ width: 76px; }
  .story-avatar{ width: 48px; height: 48px; }
  .story-label{ font-size: 11px; }
  /* reposition pulse relative to avatar */
  .story-pulse{ position: absolute; top: 6px; right: 12px; margin-top: 0; margin-left: 0; width: 10px; height: 10px; }
}

/* Modal overlay animation */
.modal-overlay{ animation: modal-fade 180ms cubic-bezier(.2,.9,.3,1) both; }
@keyframes modal-fade{ from { opacity:0; transform: translateY(6px) scale(.99); } to { opacity:1; transform: translateY(0) scale(1); } }

/* Dark WhatsApp theme overrides */
[data-theme="dark"]{
  /* WhatsApp dark palette */
  --dark-900: #0B141A; /* WhatsApp dark bg */
  --dark-800: #111B21; /* WhatsApp dark card */
  --wa-green: #00A884; /* WhatsApp dark mode green */
  --wa-teal: #008069; /* WhatsApp dark mode teal */
  --glass-border: rgba(255,255,255,0.08);
  --glass-highlight: rgba(255,255,255,0.04);
  /* accessibility */
  --text-high: #E9EDEF; /* WhatsApp dark text */
  --muted-high: #8696A0; /* WhatsApp dark muted */
  --border-dark: rgba(255,255,255,0.1);
}

/* Map common variables for dark theme so rest of CSS can use --bg/--card/--text/--muted */
[data-theme="dark"]{
  --bg: #0B141A;
  --card: #111B21;
  /* solid card background for panels that must be opaque on dark theme */
  --card-solid: #111B21;
  --text: var(--text-high);
  --muted: var(--muted-high);
  --primary: var(--wa-green);
  --accent: var(--wa-teal);
  --chat-bubble-out: #005C4B; /* WhatsApp dark outgoing */
  --chat-bubble-in: #202C33; /* WhatsApp dark incoming */
}

/* page background: subtle gradient for WhatsApp feel */
body::before{
  content: '';
  position: fixed; inset: 0; z-index: -1;
  background: var(--bg);
  backdrop-filter: none;
}

[data-theme="dark"] body::before{
  background: linear-gradient(180deg, #0B141A 0%, #111B21 100%);
}

main{
  background: var(--card);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  box-shadow: 0 1px 3px rgba(11,20,26,0.1);
  color: var(--text-high);
  line-height: 1.5;
}

[data-theme="dark"] main{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  box-shadow: 0 1px 3px rgba(0,0,0,0.4);
}

/* WhatsApp brand logo */
.brand .logo{
  background: linear-gradient(135deg, var(--primary), var(--accent));
  box-shadow: 0 2px 8px rgba(37,211,102,0.3);
  border-radius:8px;
}

[data-theme="dark"] .brand .logo{
  box-shadow: 0 2px 8px rgba(0,168,132,0.3);
}

/* Cards: WhatsApp clean style */
.card, .post-card{
  background: var(--card);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  box-shadow: 0 1px 2px rgba(11,20,26,0.08);
  border-radius: 8px;
}

[data-theme="dark"] .card, [data-theme="dark"] .post-card{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  box-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.post-card{
  position:relative;
  overflow:visible;
  transition: transform 200ms ease, box-shadow 200ms ease;
}

.post-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(11,20,26,0.15);
}

[data-theme="dark"] .post-card:hover{
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

.post-header .avatar{ width:52px; height:52px; box-shadow: 0 1px 2px rgba(11,20,26,0.1); }
[data-theme="dark"] .post-header .avatar{ box-shadow: 0 1px 2px rgba(0,0,0,0.3); }
.post-body{ color: var(--text); font-size: 15px; }
.post-meta{ color: var(--muted); font-size: 13px; }

/* post menu in top-right corner */
.post-card .post-menu{ position: absolute; top: 10px; right: 12px; display:flex; gap:6px; align-items:center; }
.post-card .post-menu .btn{ padding:6px 8px; font-size:13px; }
.post-card .post-menu .btn-ghost{ background: rgba(255,255,255,0.02); }

/* post menu dropdown */
.post-menu-dropdown{
  position: absolute;
  top: 36px;
  right: 0;
  background: var(--card);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  box-shadow: 0 2px 8px rgba(11,20,26,0.15);
  border-radius: 8px;
  padding: 6px;
  display:flex;
  flex-direction:column;
  gap:6px;
  z-index:30;
  min-width: 120px;
}

[data-theme="dark"] .post-menu-dropdown{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

.post-menu-dropdown .btn{ justify-content: flex-start; padding: 8px 10px; font-size: 14px; width:100%; text-align:left; }
.post-menu-dropdown .btn:hover{ background: rgba(0,0,0,0.05); }
[data-theme="dark"] .post-menu-dropdown .btn:hover{ background: rgba(255,255,255,0.05); }

/* dropdown animation + icon spacing */
.post-menu-dropdown{ transform-origin: top right; animation: dropdown-in 160ms cubic-bezier(.2,.9,.3,1) both; }
.post-menu-dropdown .btn svg{ width:16px; height:16px; margin-right:8px; flex: 0 0 16px; color: inherit; }

@keyframes dropdown-in{ from { opacity: 0; transform: scale(.96) translateY(-6px); } to { opacity: 1; transform: scale(1) translateY(0); } }

/* Confirm modal specific tweaks */
.confirm-modal{ max-width:520px; width:90%; padding: 16px; }
.confirm-modal h3{ margin: 0; }

/* WhatsApp-style buttons */
.btn{
  border: 0;
  cursor: pointer;
  border-radius: 8px;
  padding: 10px 16px;
  font-weight: 500;
  font-size: 14px;
  transition: all 150ms ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-sm{
  padding: 6px 12px;
  font-size: 13px;
}

.btn-primary{
  background: var(--primary);
  color: #ffffff;
  box-shadow: 0 1px 3px rgba(37,211,102,0.3);
  border: none;
  font-weight: 500;
}

[data-theme="dark"] .btn-primary{
  background: var(--wa-green);
  box-shadow: 0 1px 3px rgba(0,168,132,0.3);
}

.btn-ghost{
  color: var(--text);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  background: transparent;
}

[data-theme="dark"] .btn-ghost{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  color: var(--text-high);
}

.btn-outline-secondary{
  color: var(--muted);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  background: transparent;
}

[data-theme="dark"] .btn-outline-secondary{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  color: var(--muted-high);
}

.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }
.btn:disabled{
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Like button WhatsApp style */
.btn-liked{
  background: rgba(37,211,102,0.1);
  border-left: 2px solid var(--primary);
}

[data-theme="dark"] .btn-liked{
  background: rgba(0,168,132,0.15);
  border-left-color: var(--wa-green);
}

/* Comments WhatsApp style */
.comment{
  background: var(--card);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  border-radius: 8px;
  padding: 10px 12px;
  color: var(--text);
  margin-bottom: 8px;
}

[data-theme="dark"] .comment{
  background: var(--chat-bubble-in);
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  color: var(--text-high);
}

.comment strong{
  color: var(--text-high);
  font-weight: 500;
}

.comment .muted{
  color: var(--muted);
  opacity: 0.8;
}

/* Toasts WhatsApp style */
.toast{
  background: var(--card);
  color: var(--text);
  border-left: 4px solid transparent;
  box-shadow: 0 2px 8px rgba(11,20,26,0.15);
}

[data-theme="dark"] .toast{
  background: var(--card-solid);
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

.toast.success{ border-left-color: var(--primary); }
.toast.error{ border-left-color: var(--danger); }
.toast.info{ border-left-color: #54A7E1; }

/* Story tile WhatsApp style */
.story-tile img.avatar{
  border-radius:999px;
  box-shadow: 0 0 0 3px var(--primary);
}

[data-theme="dark"] .story-tile img.avatar{
  box-shadow: 0 0 0 3px var(--wa-green);
}

.story-pulse{
  background: var(--primary);
  box-shadow: 0 0 12px var(--primary);
}

[data-theme="dark"] .story-pulse{
  background: var(--wa-green);
  box-shadow: 0 0 12px var(--wa-green);
}

/* Progress bar WhatsApp style */
.story-progress{
  background: var(--primary);
  box-shadow: none;
}

[data-theme="dark"] .story-progress{
  background: var(--wa-green);
}

/* Accessibility: focus outlines WhatsApp style */
a:focus, button:focus, input:focus, textarea:focus{
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

[data-theme="dark"] a:focus, [data-theme="dark"] button:focus, [data-theme="dark"] input:focus, [data-theme="dark"] textarea:focus{
  outline-color: var(--wa-green);
}
.muted{ color: var(--muted-high); }

/* small responsive tweak for mobile */
@media (max-width:420px){
  .post-card:hover{ transform:none; box-shadow: 0 2px 8px rgba(11,20,26,0.12); }
  .brand .logo{ transform:none; }
  [data-theme="dark"] .post-card:hover{ box-shadow: 0 2px 8px rgba(0,0,0,0.4); }
}

/* Message avatars WhatsApp style */
.avatar-neon{
  width:44px;
  height:44px;
  border-radius:999px;
  object-fit:cover;
  flex: 0 0 44px;
  transition: box-shadow 200ms ease, transform 160ms ease, border-color 200ms ease;
  border: 2px solid var(--border-light, rgba(0,0,0,0.08));
}

[data-theme="dark"] .avatar-neon{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
}

.avatar-neon:active{ transform: scale(.98); }

.avatar-neon-sm{
  width:36px;
  height:36px;
  border-radius:999px;
  object-fit:cover;
  flex:0 0 36px;
  border:2px solid var(--border-light, rgba(0,0,0,0.08));
}

[data-theme="dark"] .avatar-neon-sm{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
}

.inbox-item{
  display:flex;
  gap:12px;
  align-items:center;
  text-align:left;
}

.inbox-item.selected{
  background: rgba(37,211,102,0.08);
  border-left: 3px solid var(--primary);
}

[data-theme="dark"] .inbox-item.selected{
  background: rgba(0,168,132,0.1);
  border-left-color: var(--wa-green);
}

/* Avatar hover effect WhatsApp style */
.avatar-neon:hover, .avatar-neon-sm:hover{
  transform: scale(1.05);
}

/* Message bubble styles - WhatsApp inspired */
.msg-bubble{
  border-radius:8px;
  padding:8px 12px;
  box-shadow: 0 1px 1px rgba(11,20,26,0.1);
  max-width: 620px;
}

[data-theme="dark"] .msg-bubble{
  box-shadow: 0 1px 1px rgba(0,0,0,0.2);
}

.msg-bubble .muted{ font-size:12px; }

.msg-bubble.mine{
  background: var(--chat-bubble-out);
  color: var(--text);
  border: none;
}

[data-theme="dark"] .msg-bubble.mine{
  background: var(--chat-bubble-out);
  color: var(--text-high);
}

.msg-bubble.other{
  background: var(--chat-bubble-in);
  color: var(--text);
  border: none;
}

[data-theme="dark"] .msg-bubble.other{
  background: var(--chat-bubble-in);
  color: var(--text-high);
}

/* Unread badge WhatsApp style */
.badge-unread{
  background: var(--primary);
  color: #fff;
  font-size:12px;
  padding:2px 6px;
  border-radius:12px;
  font-weight:700;
  min-width: 20px;
  text-align: center;
}

[data-theme="dark"] .badge-unread{
  background: var(--wa-green);
}

/* Slight highlight for selected inbox item */
[data-theme="light"] .inbox-item.selected{
  background: rgba(37,211,102,0.08);
}

/* Messages layout: sidebar + thread that use full height */
.messages-shell{ display:grid; grid-template-columns: 320px 1fr; gap:12px; height: calc(100vh - 56px); padding: 12px; box-sizing: border-box; }
.messages-sidebar{ display:flex; flex-direction:column; gap:12px; overflow:hidden; }
.messages-sidebar .new-message{ margin-bottom: 6px; }
.inbox-list{ overflow:auto; padding-right:6px; scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.12) transparent; }

/* WebKit custom scrollbar for inbox list */
.inbox-list::-webkit-scrollbar{ width: 10px; }
.inbox-list::-webkit-scrollbar-track{ background: transparent; }
.inbox-list::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); border-radius: 999px; border: 2px solid transparent; background-clip: padding-box; }
.inbox-list:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.10); }

/* Recipients list (new message sidebar) - transparent, subtle scrollbar */
.recipients-list{ scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.04) transparent; }
.recipients-list::-webkit-scrollbar{ width: 8px; }
.recipients-list::-webkit-scrollbar-track{ background: transparent; }
.recipients-list::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.03); border-radius: 999px; }
.recipients-list:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); }

/* Slightly stronger thumb on dark theme */
[data-theme="dark"] .inbox-list::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.08); }
[data-theme="dark"] .inbox-list:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.14); }
.messages-content{ display:flex; flex-direction:column; gap:12px; height:100%; overflow-y: auto; -webkit-overflow-scrolling: touch; padding-right: 6px; scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.06) transparent; }
/* WebKit scrollbar for messages-content */
.messages-content::-webkit-scrollbar{ width: 10px; }
.messages-content::-webkit-scrollbar-track{ background: transparent; }
.messages-content::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.04); border-radius: 999px; border: 2px solid transparent; background-clip: padding-box; }
.messages-content:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.08); }

[data-theme="dark"] .messages-content::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); }
[data-theme="dark"] .messages-content:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.12); }
[data-theme="light"] .messages-content::-webkit-scrollbar-thumb{ background: rgba(15,23,36,0.04); }
[data-theme="light"] .messages-content:hover::-webkit-scrollbar-thumb{ background: rgba(15,23,36,0.08); }
.thread-header{ flex:0 0 auto; }
.thread-window{ flex:1 1 auto; display:flex; flex-direction:column; gap:12px; overflow:hidden; }
.thread-messages{ flex:1 1 auto; overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling: touch; padding:12px; display:flex; flex-direction:column; gap:8px; }
.thread-messages{ scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.06) transparent; scrollbar-gutter: stable; }

/* WebKit scrollbar: subtle/transparent for thread messages so the panel doesn't expand */
.thread-messages::-webkit-scrollbar{ width: 8px; }
.thread-messages::-webkit-scrollbar-track{ background: transparent; }
.thread-messages::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.04); border-radius: 999px; border: 2px solid transparent; background-clip: padding-box; }
.thread-messages:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.08); }
.thread-messages::-webkit-scrollbar-corner{ background: transparent; }

[data-theme="dark"] .thread-messages::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.06); }
[data-theme="dark"] .thread-messages:hover::-webkit-scrollbar-thumb{ background: rgba(255,255,255,0.12); }
[data-theme="light"] .thread-messages::-webkit-scrollbar-thumb{ background: rgba(15,23,36,0.04); }
[data-theme="light"] .thread-messages:hover::-webkit-scrollbar-thumb{ background: rgba(15,23,36,0.08); }
.composer{ flex:0 0 auto; border-top: 1px solid var(--glass-border, rgba(255,255,255,0.04)); padding:12px; background: var(--card); }

/* Make inbox cards full width */
.inbox-list .card{ width: 100%; text-align:left; }

/* Small responsive tweak: collapse to single column on small screens */
@media (max-width:720px){
  .messages-shell{ grid-template-columns: 1fr; height: auto; }
  .messages-sidebar{ order: 2; }
  .messages-content{ order: 1; }
}

/* Theme toggle button WhatsApp style */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 8px;
  border-radius:8px;
  cursor:pointer;
  border:1px solid var(--border-light, rgba(0,0,0,0.08));
  background: transparent;
  color: inherit;
}

[data-theme="dark"] .theme-toggle{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
}

.theme-toggle svg{ width:18px; height:18px; display:block; }

.theme-toggle:focus{
  outline: 2px solid var(--primary);
  outline-offset:2px;
}

[data-theme="dark"] .theme-toggle:focus{
  outline-color: var(--wa-green);
}

/* Smooth theme transition */
body, main, header.site-header, .card, .post-card, .brand .logo, .btn, .avatar, .story-tile {
  transition: background-color 260ms ease, color 260ms ease, box-shadow 320ms ease, border-color 260ms ease, filter 260ms ease;
}

/* Theme menu WhatsApp style */
.theme-menu{
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  background: var(--card);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  box-shadow: 0 2px 8px rgba(11,20,26,0.15);
  border-radius: 8px;
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 140px;
  z-index: 80;
}

[data-theme="dark"] .theme-menu{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

.theme-menu-item{
  background: transparent;
  border:0;
  padding:8px 10px;
  text-align:left;
  border-radius:6px;
  cursor:pointer;
  color: var(--text-high);
}

.theme-menu-item:hover{
  background: rgba(0,0,0,0.05);
}

[data-theme="dark"] .theme-menu-item:hover{
  background: rgba(255,255,255,0.05);
}

/* Mobile menu WhatsApp style */
.mobile-menu{
  min-width: 180px;
  padding: 10px;
  border-radius: 8px;
  background: var(--card-solid);
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
  box-shadow: 0 2px 8px rgba(11,20,26,0.15);
}

[data-theme="dark"] .mobile-menu{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

.mobile-menu a{
  display:block;
  padding:10px 8px;
  color:var(--text);
  border-radius:8px;
  text-decoration:none;
}

.mobile-menu a:hover{
  background: rgba(0,0,0,0.05);
}

[data-theme="dark"] .mobile-menu a:hover{
  background: rgba(255,255,255,0.05);
}

/* Mobile item layout WhatsApp style */
.mobile-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  border-radius:8px;
  color:var(--text);
  text-decoration:none;
  font-weight:500;
}

.mobile-item svg{ flex: 0 0 18px; opacity: 0.7; }
.mobile-item span{ flex:1; }

.mobile-divider{
  height:1px;
  background: var(--border-light, rgba(0,0,0,0.08));
  margin:8px 0;
  border-radius:2px;
}

[data-theme="dark"] .mobile-divider{
  background: var(--border-dark, rgba(255,255,255,0.1));
}

.mobile-cta{
  background: var(--primary);
  color: #ffffff;
  text-align:center;
  font-weight: 600;
}

[data-theme="dark"] .mobile-cta{
  background: var(--wa-green);
}

.mobile-logout{
  background: transparent;
  border: 1px solid var(--border-light, rgba(0,0,0,0.08));
}

[data-theme="dark"] .mobile-logout{
  border-color: var(--border-dark, rgba(255,255,255,0.1));
}

@media (max-width:420px){
  .mobile-menu{ left: 8px; right: 8px; min-width: auto; }
  .theme-menu{ right: 8px; left: 8px; }
}

/* Mobile menu container: fixed to viewport to avoid expanding document width when opened.
   pointer-events on container are disabled so clicks pass through to the panel itself
   (panel has pointer-events enabled). Top is a conservative header height, adjust if header size changes. */
@media (max-width:720px){
  .mobile-menu-container{
    position: fixed;
    top: 64px; /* adjust if your header is taller */
    left: 12px;
    right: 12px;
    z-index: 100;
    display: flex;
    justify-content: flex-end;
    pointer-events: none; /* panel will handle pointer events */
  }
  .mobile-menu-container .mobile-menu{
    pointer-events: auto;
    max-width: calc(100% - 24px);
    box-sizing: border-box;
  }
}

/* Desktop / tablet: ensure nav-inline and nav items appear in a single row and don't wrap */
@media (min-width:721px){
  /* Desktop / tablet: ensure nav-inline and nav items appear in a single row and don't wrap */
  .nav-inline{ display:flex; gap:12px; align-items:center; overflow:visible; }
  /* ensure all navigation controls (wherever nested) are visible inline */
  .nav-links{ flex-wrap: nowrap; align-items: center; }
  .nav-links .theme-toggle { display: inline-flex; }
  .nav-links .nav-notifications { display: inline-flex; }
  .nav-links .avatar, .nav-links .btn, .nav-links .muted, .nav-links a{ display: inline-flex !important; }
  /* hide hamburger on desktop */
  .hamburger{ display:none; }
  /* keep brand compact and pinned left so nav controls can share one row */
  .brand{ flex: 0 0 auto; }
  .nav-links{ flex: 1 1 auto; justify-content: flex-end; }
  /* ensure username doesn't wrap and instead truncates with ellipsis */
  .nav-links .muted{ max-width: 160px; display: inline-block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  /* small spacing tweak so notifications sit inline nicely */
  .nav-notifications{ margin-left: 8px; margin-right: 6px; }
}

/* Hide old full-screen drawer (kept for reference) */
.mobile-drawer, .mobile-drawer-backdrop, .mobile-drawer-panel { display:none !important; }


/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  body, main, header.site-header, .card, .post-card, .brand .logo, .btn, .avatar, .story-tile {
    transition: none !important;
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
  }
}


/* like burst animation WhatsApp style */
.btn-like-anim{ transition: transform 140ms; }
.btn-like-anim.btn-liked{ animation: like-burst 600ms ease forwards; }
@keyframes like-burst{
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

/* Buttons ripple effect WhatsApp style */
.btn{ position:relative; overflow:hidden; }
.btn::after{
  content: '';
  position:absolute;
  left:50%;
  top:50%;
  width:8px;
  height:8px;
  background: rgba(255,255,255,0.3);
  border-radius:50%;
  transform: translate(-50%,-50%) scale(0);
  opacity:0;
  transition: transform 400ms ease, opacity 400ms;
  pointer-events:none;
}

.btn:active::after{
  transform: translate(-50%,-50%) scale(16);
  opacity:1;
  transition: transform 400ms ease, opacity 400ms;
}

/* Small micro-interactions */
.btn:hover{ transform: translateY(-2px); }

/* subtle 3D tilt transform on press for interactive feel */
.btn:active{ transform: translateY(0) scale(0.995); }


